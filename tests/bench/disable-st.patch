From bebbd732ac64eefe841ec2da25a67c756dfa0f61 Mon Sep 17 00:00:00 2001
From: Sebastian Ullrich <sebasti@nullri.ch>
Date: Mon, 11 Nov 2019 18:15:21 +0100
Subject: [PATCH] disable ST objects

---
 src/include/lean/lean.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/include/lean/lean.h b/src/include/lean/lean.h
index 6b37fd91a..c53137860 100644
--- a/src/include/lean/lean.h
+++ b/src/include/lean/lean.h
@@ -498,7 +498,7 @@ LEAN_SHARED void lean_mark_mt(lean_object * o);
 LEAN_SHARED void lean_mark_persistent(lean_object * o);

 static inline void lean_set_st_header(lean_object * o, unsigned tag, unsigned other) {
-    o->m_rc       = 1;
+    o->m_rc       = -1;
     o->m_tag      = tag;
     o->m_other    = other;
     o->m_cs_sz    = 0;
